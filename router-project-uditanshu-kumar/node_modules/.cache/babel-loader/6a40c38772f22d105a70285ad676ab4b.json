{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/uditanshu/Masai/React Cart/router-project-uditanshu-kumar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/uditanshu/Masai/React Cart/router-project-uditanshu-kumar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/uditanshu/Masai/React Cart/router-project-uditanshu-kumar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/uditanshu/Masai/React Cart/router-project-uditanshu-kumar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import styles from\"./Cart.module.css\";import axios from\"axios\";import{AuthContext}from\"../Context/AuthContextProvider\";import{useHistory}from\"react-router-dom\";var Cart=function Cart(){var cartItems=React.useRef([]);var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),itemDetails=_React$useState2[0],setItemDetails=_React$useState2[1];var _React$useContext=React.useContext(AuthContext),isAuth=_React$useContext.isAuth;var getCartItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,response2,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://json-server-react-cart.herokuapp.com/cart\");case 2:response=_context.sent;_context.next=5;return response.data;case 5:cartItems=_context.sent;_context.next=8;return console.log(cartItems);case 8:i=0;case 9:if(!(i<cartItems.length)){_context.next=18;break;}_context.next=12;return axios.get(\"https://json-server-react-cart.herokuapp.com/\".concat(cartItems[i].type,\"/\").concat(cartItems[i].id));case 12:response2=_context.sent;_context.next=15;return setItemDetails(function(prev){return[].concat(_toConsumableArray(prev),[response2.data]);});case 15:i++;_context.next=9;break;case 18:case\"end\":return _context.stop();}}},_callee);}));return function getCartItems(){return _ref.apply(this,arguments);};}();var history=useHistory();React.useEffect(function(){if(isAuth){getCartItems();}else{history.push(\"/login\");}},[isAuth]);return/*#__PURE__*/_jsx(\"div\",{className:styles.mainContainer,children:itemDetails.map(function(_ref2){var name=_ref2.name,id=_ref2.id,image=_ref2.image,price=_ref2.price;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"itemPic\"}),/*#__PURE__*/_jsx(\"div\",{children:name}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Price: $ \",price]})]},\"cart-\".concat(id));})});};export{Cart};","map":{"version":3,"sources":["/home/uditanshu/Masai/React Cart/router-project-uditanshu-kumar/src/Routes/Cart.jsx"],"names":["React","styles","axios","AuthContext","useHistory","Cart","cartItems","useRef","useState","itemDetails","setItemDetails","useContext","isAuth","getCartItems","get","response","data","console","log","i","length","type","id","response2","prev","history","useEffect","push","mainContainer","map","name","image","price"],"mappings":"qzBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,gCAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjB,GAAIC,CAAAA,SAAS,CAAGN,KAAK,CAACO,MAAN,CAAa,EAAb,CAAhB,CADiB,oBAEqBP,KAAK,CAACQ,QAAN,CAAe,EAAf,CAFrB,oDAEVC,WAFU,qBAEGC,cAFH,2CAIEV,KAAK,CAACW,UAAN,CAAiBR,WAAjB,CAJF,CAITS,MAJS,mBAITA,MAJS,CAMjB,GAAMC,CAAAA,YAAY,0FAAG,kLACEX,CAAAA,KAAK,CAACY,GAAN,CACnB,mDADmB,CADF,QACfC,QADe,qCAIDA,CAAAA,QAAQ,CAACC,IAJR,QAInBV,SAJmB,qCAKbW,CAAAA,OAAO,CAACC,GAAR,CAAYZ,SAAZ,CALa,QAQVa,CARU,CAQN,CARM,aAQHA,CAAC,CAAGb,SAAS,CAACc,MARX,kDASClB,CAAAA,KAAK,CAACY,GAAN,wDACgCR,SAAS,CAACa,CAAD,CAAT,CAAaE,IAD7C,aACqDf,SAAS,CAACa,CAAD,CAAT,CAAaG,EADlE,EATD,SASjBC,SATiB,sCAYXb,CAAAA,cAAc,CAAC,SAACc,IAAD,qCAAcA,IAAd,GAAoBD,SAAS,CAACP,IAA9B,IAAD,CAZH,SAQmBG,CAAC,EARpB,8EAAH,kBAAZN,CAAAA,YAAY,0CAAlB,CAgBA,GAAIY,CAAAA,OAAO,CAAGrB,UAAU,EAAxB,CACAJ,KAAK,CAAC0B,SAAN,CAAgB,UAAM,CACpB,GAAId,MAAJ,CAAY,CACVC,YAAY,GACb,CAFD,IAEO,CACLY,OAAO,CAACE,IAAR,CAAa,QAAb,EACD,CACF,CAND,CAMG,CAACf,MAAD,CANH,EAQA,mBACE,YAAK,SAAS,CAAEX,MAAM,CAAC2B,aAAvB,UACGnB,WAAW,CAACoB,GAAZ,CAAgB,mBAAGC,CAAAA,IAAH,OAAGA,IAAH,CAASR,EAAT,OAASA,EAAT,CAAaS,KAAb,OAAaA,KAAb,CAAoBC,KAApB,OAAoBA,KAApB,oBACf,oCACE,YAAK,GAAG,CAAED,KAAV,CAAiB,GAAG,CAAC,SAArB,EADF,cAEE,qBAAMD,IAAN,EAFF,cAGE,mCAAeE,KAAf,GAHF,kBAAkBV,EAAlB,EADe,EAAhB,CADH,EADF,CAWD,CA1CD,CA4CA,OAASjB,IAAT","sourcesContent":["import React from \"react\";\nimport styles from \"./Cart.module.css\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../Context/AuthContextProvider\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Cart = () => {\n  let cartItems = React.useRef([]);\n  const [itemDetails, setItemDetails] = React.useState([]);\n\n  const { isAuth } = React.useContext(AuthContext);\n\n  const getCartItems = async () => {\n    let response = await axios.get(\n      \"https://json-server-react-cart.herokuapp.com/cart\"\n    );\n    cartItems = await response.data;\n    await console.log(cartItems);\n\n    let response2;\n    for (let i = 0; i < cartItems.length; i++) {\n      response2 = await axios.get(\n        `https://json-server-react-cart.herokuapp.com/${cartItems[i].type}/${cartItems[i].id}`\n      );\n      await setItemDetails((prev) => [...prev, response2.data]);\n    }\n  };\n\n  let history = useHistory();\n  React.useEffect(() => {\n    if (isAuth) {\n      getCartItems();\n    } else {\n      history.push(\"/login\");\n    }\n  }, [isAuth]);\n\n  return (\n    <div className={styles.mainContainer}>\n      {itemDetails.map(({ name, id, image, price }) => (\n        <div key={`cart-${id}`}>\n          <img src={image} alt=\"itemPic\" />\n          <div>{name}</div>\n          <div>Price: $ {price}</div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport { Cart };\n"]},"metadata":{},"sourceType":"module"}